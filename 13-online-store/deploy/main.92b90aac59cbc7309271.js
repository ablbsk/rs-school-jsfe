(()=>{"use strict";var t={370:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},437:(t,e,a)=>{t.exports=a.p+"assets/icons/logo.svg"},749:(t,e,a)=>{t.exports=a.p+"assets/icons/masmi.svg"},57:(t,e,a)=>{t.exports=a.p+"assets/icons/pay/belcard-int.png"},302:(t,e,a)=>{t.exports=a.p+"assets/icons/pay/belcard.png"},887:(t,e,a)=>{t.exports=a.p+"assets/icons/pay/mastercard-securecode.png"},650:(t,e,a)=>{t.exports=a.p+"assets/icons/pay/mastercard.png"},516:(t,e,a)=>{t.exports=a.p+"assets/icons/pay/visa.png"},678:(t,e,a)=>{t.exports=a.p+"assets/icons/social/facebook.svg"},881:(t,e,a)=>{t.exports=a.p+"assets/icons/social/instagram.svg"},566:(t,e,a)=>{t.exports=a.p+"assets/icons/social/odnoklasniki.svg"},695:(t,e,a)=>{t.exports=a.p+"assets/icons/social/vkontakte.svg"},298:(t,e,a)=>{t.exports=a.p+"assets/icons/social/youtube.svg"}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),a.b=document.baseURI||self.location.href,(()=>{var t=a(370),e=a.n(t),s=new URL(a(749),a.b);const n='<div class="wrapper"> <section class="about-us"> <h1 class="about-us__header">Нам доверяют более 500 000 клиентов</h1> <ul class="about-us__list"> <li class="about-us__item"> <span class="icon icon--market-leader"></span> <h2 class="about-us__title">Лидер на рынке шин</h2> <p class="about-us__description">В наличии более 5 000 именованных шин</p> </li> <li class="about-us__item"> <span class="icon icon--handshake"></span> <h2 class="about-us__title">Доверие клиентов</h2> <p class="about-us__description">Обслуживание юридических и физических лиц</p> </li> <li class="about-us__item"> <span class="icon icon--pay-party"></span> <h2 class="about-us__title">Оплата частями</h2> <p class="about-us__description">Равными долями до 60 месяцев</p> </li> <li class="about-us__item"> <span class="icon icon--unique-offers"></span> <h2 class="about-us__title">Уникальные предложения</h2> <p class="about-us__description">Индивидуальные условия для бизнеса</p> </li> <li class="about-us__item"> <span class="icon icon--service-common"></span> <h2 class="about-us__title">Сервисное обслуживание</h2> <p class="about-us__description">Комплексное сервисное обслуживание</p> </li> <li class="about-us__item"> <span class="icon icon--sign-to-service"></span> <h2 class="about-us__title">Онлайн запись</h2> <p class="about-us__description">Обслуживание в удобное для вас время</p> </li> </ul> </section> <section class="awards"> <h2 class="awards__header">Награды</h2> <div class="awards__container"> <img class="awards__image" src="'+e()(s)+'" alt="Masmi awards image"> <p class="awards__description">Автосеть – самый популярный продавец легковых шин, по данным исследовательского центра MASMI. Опрос проводился в марте 2022 года среди городского населения Беларуси в возрасте от 18 до 64 лет.</p> </div> </section> </div> ';var i=new URL(a(437),a.b);const o='<div class="wrapper"> <div class="header__main"> <div class="logo"> <a href="/" data-local-link> <img class="logo__image" src="'+e()(i)+'" alt="Автосеть — логотип"> </a> </div> <ul class="menu"> <li class="menu__item menu__item--not-allowed menu__item--minor"> <span class="icon icon--phone"></span> <span class="menu__title">686-86-86</span> </li> <li class="menu__item"> <a class="menu__link" href="/cart" data-local-link> <span class="icon icon--basket"></span> <span class="menu__title">Корзина</span> </a> <span id="basketCount" class="menu__count">2шт./18000руб.</span> </li> </ul> </div> </div> <nav class="navigation"> <ul class="navigation__list"> <li id="tires" class="navigation__item"> <a href="/catalog" class="navigation__link" data-local-link> <span class="icon icon--tire"></span> <span class="navigation__title">Шины</span> </a> </li> <li class="navigation__item navigation__item--not-allowed"> <a class="navigation__link" href="#"> <span class="icon icon--rim"></span> <span class="navigation__title">Колеса</span> </a> </li> </ul> </nav> ',r=JSON.parse('{"tire-1":{"id":"1","brand":"Viatti","model":"Strada Asimmetrico V-130","season":"summer","count":"20","price":"200","imageUrl":["https://autoset.by/upload/uf/692/6924c7aa23d056be498850fa57aadfc0.jpg","https://autoset.by/upload/uf/bfb/bfb295be4a19a4fe313e8b847407714d.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"4.6","commentsCount":"21"},"features":{"protector":"7.0","weight":"9.5","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-2":{"id":"2","brand":"Viatti","model":"Strada Asimmetrico V-130","season":"summer","count":"12","price":"188","imageUrl":["https://autoset.by/upload/uf/692/6924c7aa23d056be498850fa57aadfc0.jpg","https://autoset.by/upload/uf/bfb/bfb295be4a19a4fe313e8b847407714d.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.4","commentsCount":"13"},"features":{"protector":"7.0","weight":"9.5","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-3":{"id":"3","brand":"Viatti","model":"Strada Asimmetrico V-130","season":"summer","count":"4","price":"180","imageUrl":["https://autoset.by/upload/uf/692/6924c7aa23d056be498850fa57aadfc0.jpg","https://autoset.by/upload/uf/bfb/bfb295be4a19a4fe313e8b847407714d.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.6","commentsCount":"3"},"features":{"protector":"7.0","weight":"9.5","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-4":{"id":"4","brand":"Viatti","model":"Brina V-521","season":"winter","count":"10","price":"250","imageUrl":["https://autoset.by/upload/uf/a44/a44021de987c7209348ebc8d087eb051.jpg","https://autoset.by/upload/uf/05c/05c6cbcef085727b3fb4eb5aad23722b.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"3.9","commentsCount":"4"},"features":{"protector":"8.0","weight":"9.0","exploitation":"Лед и снег","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"T (до 190 км/ч)"}},"tire-5":{"id":"5","brand":"Viatti","model":"Brina V-521","season":"winter","count":"3","price":"230","imageUrl":["https://autoset.by/upload/uf/a44/a44021de987c7209348ebc8d087eb051.jpg","https://autoset.by/upload/uf/05c/05c6cbcef085727b3fb4eb5aad23722b.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.2","commentsCount":"7"},"features":{"protector":"8.0","weight":"9.0","exploitation":"Лед и снег","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"T (до 190 км/ч)"}},"tire-6":{"id":"6","brand":"Viatti","model":"Brina V-521","season":"winter","count":"10","price":"215","imageUrl":["https://autoset.by/upload/uf/a44/a44021de987c7209348ebc8d087eb051.jpg","https://autoset.by/upload/uf/05c/05c6cbcef085727b3fb4eb5aad23722b.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.0","commentsCount":"1"},"features":{"protector":"8.0","weight":"9.0","exploitation":"Лед и снег","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"T (до 190 км/ч)"}},"tire-7":{"id":"7","brand":"Nokian","model":"Nordman SX3","season":"summer","count":"10","price":"215","imageUrl":["https://autoset.by/upload/uf/eef/eef752cf94f509af5b4d2c4e9bc124b1.jpg","https://autoset.by/upload/uf/565/56508ab031578f65045f76d6792b0977.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"3.2","commentsCount":"10"},"features":{"protector":"7.5","weight":"Нет данных","exploitation":"100% асфальт","discProtector":"Нет данных","loadIndex":"97 (до 2920 кг)","speedIndex":"H (до 210 км/ч)"}},"tire-8":{"id":"8","brand":"Nokian","model":"Nordman SX3","season":"summer","count":"14","price":"213","imageUrl":["https://autoset.by/upload/uf/eef/eef752cf94f509af5b4d2c4e9bc124b1.jpg","https://autoset.by/upload/uf/565/56508ab031578f65045f76d6792b0977.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"3.5","commentsCount":"3"},"features":{"protector":"7.5","weight":"Нет данных","exploitation":"100% асфальт","discProtector":"Нет данных","loadIndex":"97 (до 2920 кг)","speedIndex":"H (до 210 км/ч)"}},"tire-9":{"id":"9","brand":"Nokian","model":"Nordman SX3","season":"summer","count":"1","price":"199","imageUrl":["https://autoset.by/upload/uf/eef/eef752cf94f509af5b4d2c4e9bc124b1.jpg","https://autoset.by/upload/uf/565/56508ab031578f65045f76d6792b0977.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"3.9","commentsCount":"2"},"features":{"protector":"7.5","weight":"Нет данных","exploitation":"100% асфальт","discProtector":"Нет данных","loadIndex":"97 (до 2920 кг)","speedIndex":"H (до 210 км/ч)"}},"tire-10":{"id":"10","brand":"Nokian","model":"Hakka Green 3","season":"winter","count":"26","price":"220","imageUrl":["https://autoset.by/upload/uf/1ad/1ad0a908da4f6dd6d407b238b3782c79.jpg","https://autoset.by/upload/resize_cache/uf/153/1000_1370_1/1535956191cdfbe0546a347e016edaf0.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.6","commentsCount":"4"},"features":{"protector":"7.5","weight":"8.9","exploitation":"Снег и слякоть","discProtector":"Есть","loadIndex":"94 (до 2680 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-11":{"id":"11","brand":"Nokian","model":"Hakka Green 3","season":"winter","count":"30","price":"234","imageUrl":["https://autoset.by/upload/uf/1ad/1ad0a908da4f6dd6d407b238b3782c79.jpg","https://autoset.by/upload/resize_cache/uf/153/1000_1370_1/1535956191cdfbe0546a347e016edaf0.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"4.1","commentsCount":"3"},"features":{"protector":"7.5","weight":"8.9","exploitation":"Снег и слякоть","discProtector":"Есть","loadIndex":"94 (до 2680 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-12":{"id":"12","brand":"Nokian","model":"Hakka Green 3","season":"winter","count":"12","price":"228","imageUrl":["https://autoset.by/upload/uf/1ad/1ad0a908da4f6dd6d407b238b3782c79.jpg","https://autoset.by/upload/resize_cache/uf/153/1000_1370_1/1535956191cdfbe0546a347e016edaf0.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.2","commentsCount":"6"},"features":{"protector":"7.5","weight":"8.9","exploitation":"Снег и слякоть","discProtector":"Есть","loadIndex":"94 (до 2680 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-13":{"id":"13","brand":"Nokian","model":"LTSW 2","season":"all-year","count":"15","price":"300","imageUrl":["https://autoset.by/upload/uf/348/348c9714a1e90210bda3cafe4691ef7f.jpg","https://autoset.by/upload/uf/720/72058fa1ec7f2c5e5cb0487f4a7a568b.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"4.8","commentsCount":"3"},"features":{"protector":"8.5","weight":"8.4","exploitation":"Асфальт и снег","discProtector":"Нет","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-14":{"id":"14","brand":"Nokian","model":"LTSW 2","season":"all-year","count":"18","price":"276","imageUrl":["https://autoset.by/upload/uf/348/348c9714a1e90210bda3cafe4691ef7f.jpg","https://autoset.by/upload/uf/720/72058fa1ec7f2c5e5cb0487f4a7a568b.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.7","commentsCount":"5"},"features":{"protector":"8.5","weight":"8.4","exploitation":"Асфальт и снег","discProtector":"Нет","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-15":{"id":"15","brand":"Nokian","model":"LTSW 2","season":"all-year","count":"12","price":"258","imageUrl":["https://autoset.by/upload/uf/348/348c9714a1e90210bda3cafe4691ef7f.jpg","https://autoset.by/upload/uf/720/72058fa1ec7f2c5e5cb0487f4a7a568b.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.9","commentsCount":"5"},"features":{"protector":"8.5","weight":"8.4","exploitation":"Асфальт и снег","discProtector":"Нет","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-16":{"id":"16","brand":"Michelin","model":"Energy XM2+","season":"summer","count":"18","price":"300","imageUrl":["https://autoset.by/upload/uf/5b5/5b5180794bb13759ce86b88ad5354b57.jpg","https://autoset.by/upload/uf/fe3/fe3dec3ca0de07662373074dad854552.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"4.4","commentsCount":"6"},"features":{"protector":"8.5","weight":"9.2","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-17":{"id":"17","brand":"Michelin","model":"Energy XM2+","season":"summer","count":"14","price":"285","imageUrl":["https://autoset.by/upload/uf/5b5/5b5180794bb13759ce86b88ad5354b57.jpg","https://autoset.by/upload/uf/fe3/fe3dec3ca0de07662373074dad854552.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.6","commentsCount":"2"},"features":{"protector":"8.5","weight":"9.2","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-18":{"id":"18","brand":"Michelin","model":"Energy XM2+","season":"summer","count":"10","price":"250","imageUrl":["https://autoset.by/upload/uf/5b5/5b5180794bb13759ce86b88ad5354b57.jpg","https://autoset.by/upload/uf/fe3/fe3dec3ca0de07662373074dad854552.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.7","commentsCount":"10"},"features":{"protector":"8.5","weight":"9.2","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"91 (до 2460 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-19":{"id":"19","brand":"Michelin","model":"Primacy 4+","season":"all-year","count":"12","price":"350","imageUrl":["https://autoset.by/upload/uf/1cb/1cbb6ea55dad50724ab2503ec16eb178.jpg","https://autoset.by/upload/uf/ded/ded60c0fa8474639da1ad079f1664cf8.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"4.7","commentsCount":"2"},"features":{"protector":"8.5","weight":"8.9","exploitation":"Асфальт и снег","discProtector":"Есть","loadIndex":"94 (до 2680 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-20":{"id":"20","brand":"Michelin","model":"Primacy 4+","season":"all-year","count":"15","price":"330","imageUrl":["https://autoset.by/upload/uf/1cb/1cbb6ea55dad50724ab2503ec16eb178.jpg","https://autoset.by/upload/uf/ded/ded60c0fa8474639da1ad079f1664cf8.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"5","commentsCount":"1"},"features":{"protector":"8.5","weight":"8.9","exploitation":"Асфальт и снег","discProtector":"Есть","loadIndex":"94 (до 2680 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-21":{"id":"21","brand":"Michelin","model":"Primacy 4+","season":"all-year","count":"8","price":"320","imageUrl":["https://autoset.by/upload/uf/1cb/1cbb6ea55dad50724ab2503ec16eb178.jpg","https://autoset.by/upload/uf/ded/ded60c0fa8474639da1ad079f1664cf8.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.6","commentsCount":"3"},"features":{"protector":"8.5","weight":"8.9","exploitation":"Асфальт и снег","discProtector":"Есть","loadIndex":"94 (до 2680 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-22":{"id":"22","brand":"Yokohama","model":"iceGuard iG50+","season":"winter","count":"20","price":"400","imageUrl":["https://autoset.by/upload/uf/355/35598728a113e33e3801c81e1e0fa5d3.jpg","https://autoset.by/upload/uf/cac/cacf3a785cc4d487396f939f3cb348ce.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"5","commentsCount":"1"},"features":{"protector":"9.0","weight":"11.8","exploitation":"Снег и слякоть","discProtector":"Нет","loadIndex":"94 (до 2680 кг)","speedIndex":"H (до 210 км/ч)"}},"tire-23":{"id":"23","brand":"Yokohama","model":"iceGuard iG50+","season":"winter","count":"24","price":"369","imageUrl":["https://autoset.by/upload/uf/355/35598728a113e33e3801c81e1e0fa5d3.jpg","https://autoset.by/upload/uf/cac/cacf3a785cc4d487396f939f3cb348ce.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.8","commentsCount":"2"},"features":{"protector":"9.0","weight":"11.8","exploitation":"Снег и слякоть","discProtector":"Нет","loadIndex":"94 (до 2680 кг)","speedIndex":"H (до 210 км/ч)"}},"tire-24":{"id":"24","brand":"Yokohama","model":"iceGuard iG50+","season":"winter","count":"8","price":"350","imageUrl":["https://autoset.by/upload/uf/355/35598728a113e33e3801c81e1e0fa5d3.jpg","https://autoset.by/upload/uf/cac/cacf3a785cc4d487396f939f3cb348ce.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.5","commentsCount":"4"},"features":{"protector":"9.0","weight":"11.8","exploitation":"Снег и слякоть","discProtector":"Нет","loadIndex":"94 (до 2680 кг)","speedIndex":"H (до 210 км/ч)"}},"tire-25":{"id":"25","brand":"Toyo","model":"Proxes Comfort","season":"summer","count":"4","price":"375","imageUrl":["https://autoset.by/upload/uf/f9a/f9a4d82a872f31b4df213b1d8f57882a.jpg","https://autoset.by/upload/uf/eec/eecb1dbac737890301a9580290570e03.jpg"],"sizes":{"width":"215","profile":"45","radius":"17"},"rating":{"overageRating":"4.8","commentsCount":"12"},"features":{"protector":"8","weight":"8.1","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"87 (до 2180 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-26":{"id":"26","brand":"Toyo","model":"Proxes Comfort","season":"summer","count":"6","price":"350","imageUrl":["https://autoset.by/upload/uf/f9a/f9a4d82a872f31b4df213b1d8f57882a.jpg","https://autoset.by/upload/uf/eec/eecb1dbac737890301a9580290570e03.jpg"],"sizes":{"width":"205","profile":"55","radius":"16"},"rating":{"overageRating":"4.7","commentsCount":"20"},"features":{"protector":"8","weight":"8.1","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"87 (до 2180 кг)","speedIndex":"V (до 240 км/ч)"}},"tire-27":{"id":"27","brand":"Toyo","model":"Proxes Comfort","season":"summer","count":"10","price":"330","imageUrl":["https://autoset.by/upload/uf/f9a/f9a4d82a872f31b4df213b1d8f57882a.jpg","https://autoset.by/upload/uf/eec/eecb1dbac737890301a9580290570e03.jpg"],"sizes":{"width":"195","profile":"50","radius":"15"},"rating":{"overageRating":"4.8","commentsCount":"9"},"features":{"protector":"8","weight":"8.1","exploitation":"100% асфальт","discProtector":"Есть","loadIndex":"87 (до 2180 кг)","speedIndex":"V (до 240 км/ч)"}}}');class c{constructor(){this.products=c.convertProductsToArray(r),this.currentProducts=this.products}static convertProductsToArray(t){const e=[];for(const a in t){const s=t[a],n={name:a,size:`${s.sizes.width}/${s.sizes.profile} R${s.sizes.radius}`,productRating:s.rating.overageRating},i=Object.assign(n,s);e.push(i)}return e}static sortItemsBy(t,e,a){const s=t;return a.sort(((t,a)=>"ASC"===e?+t[s]-+a[s]:+a[s]-+t[s]))}static filterSearchedItems(t,e){return e.filter((e=>{let a=!1;for(const s in e){const n=e[s].toString().toLowerCase().indexOf(t[0].toLowerCase())>=0;!["id","imageUrl"].includes(s)&&n&&(a=!0)}return a}))}static filterRangeItems(t,e,a){const s=t,[n,i]=e;return a.filter((t=>+n<=+t[s]&&+t[s]<=+i))}static filterEqualItems(t,e,a){const s=t;return a.filter((t=>{var a;return e.includes(null===(a=t[s])||void 0===a?void 0:a.toString())}))}getValuesByKey(t,e){const a={},s=t;return this.products.forEach((t=>{const e=t[s].toString();e in a?a[e].total+=1:a[e]={curr:0,total:1}})),e&&this.currentProducts.forEach((t=>{const e=t[s].toString();e in a&&(a[e].curr+=1)})),a}getCurrProducts(){return this.currentProducts}getProductById(t){return this.products.filter((e=>e.id===t))[0]}setFilters(t){let e=[...this.products];for(const a in t)if(t[a].filter((t=>t)))if(["price","count"].includes(a))e=c.filterRangeItems(a,t[a],e);else if(a in e[0])e=c.filterEqualItems(a,t[a],e);else if("search"===a)e=c.filterSearchedItems(t[a],e);else if("sort"===a){const[s,n]=t[a][0].split("-");e=c.sortItemsBy(s,n,e)}return this.currentProducts=e,this.currentProducts}}const l=new c,d=new class{constructor(){this.cartProducts=[],this.paginator=new class{constructor(t,e){this.items=t||[],this.limit=e||3,this.paginatedItems=this.getPaginatedItems()}getPagesCount(){return Math.ceil(this.items.length/this.limit)}getPaginatedItems(){const t=[],e=this.getPagesCount();for(let a=1;a<=e;a+=1){const e=(a-1)*this.limit,s=(a-1)*this.limit+this.limit-1,n=s>=this.items.length?this.items.length:s;t.push(this.items.slice(e,n+1))}return t}getPageItems(t){return this.paginatedItems[+t-1]}setItems(t){this.items=t,this.paginatedItems=this.getPaginatedItems()}setLimit(t){this.limit=t,this.paginatedItems=this.getPaginatedItems()}}(this.cartProducts)}setProducts(t){this.cartProducts=t}clearProducts(){this.cartProducts=[]}addProduct(t){if(this.isProductInCart(t)){const e=this.cartProducts.find((e=>e.id===t));e&&(e.count+=1)}else this.cartProducts.push({id:t,count:1})}removeProduct(t){this.cartProducts.find((e=>e.id===t))&&(this.cartProducts=this.cartProducts.filter((e=>e.id!==t)))}decrProduct(t){const e=this.cartProducts.find((e=>e.id===t));e&&(e.count-=1,0===e.count&&(this.cartProducts=this.cartProducts.filter((t=>0!==t.count))))}getCartProducts(){return this.cartProducts}getOrderedProducts(){return this.cartProducts.map(((t,e)=>(t.num=e+1,t)))}getCountProducts(){return this.cartProducts.reduce(((t,e)=>t+ +e.count),0)}getTotal(){return this.cartProducts.reduce(((t,e)=>t+ +this.getPriceById(e.id)*+e.count),0)}getPriceById(t){return+l.getProductById(t).price}isProductInCart(t){return!!this.cartProducts.filter((e=>e.id===t)).length}setLimitProducts(t){this.paginator.setLimit(t)}getPagesCount(){return this.paginator.setItems(this.getOrderedProducts()),this.paginator.getPagesCount()}getPaginatedItems(t=1){return this.paginator.setItems(this.getOrderedProducts()),this.paginator.getPageItems(t)}},u=new class{getHTML(){const t=document.createElement("header");t.className="header",t.innerHTML=o;const e=t.querySelector("#basketCount");return this.setCartCounter(e),window.addEventListener("addedToCard",(()=>{this.setCartCounter(e)})),t}setCartCounter(t){const e=d.getCountProducts().toString(),a=d.getTotal().toString();t.innerHTML=`<span>${e} шт</span><span>${a} руб</span>`}};var p=new URL(a(887),a.b),m=new URL(a(302),a.b),h=new URL(a(516),a.b),g=new URL(a(650),a.b),_=new URL(a(57),a.b),f=new URL(a(881),a.b),b=new URL(a(678),a.b),v=new URL(a(298),a.b),C=new URL(a(695),a.b),P=new URL(a(566),a.b);const M='<div class="footer__container"> <div class="wrapper"> <div class="footer-info footer__line"> <p class="footer-info__text">Заказы по электронной почте и через сайт принимаются круглосуточно. Электронная почта <a class="footer-info__link" href="mailto:order@autoset.by">order@autoset.by</a> </p> <p class="footer-info__text">Режим работы и обработки заказов <b class="footer-info__text--bold">08.30 - 19.00 (Пн - Сб), 10.00 - 16.00 (Вс)</b> </p> </div> <div class="footer-contacts"> <div class="footer-pay"> <h3 class="footer__header">Мы принимает к оплате</h3> <ul class="footer-pay__list"> <li class="footer-pay__item"> <img class="footer-pay__image" src="'+e()(p)+'" alt="Mastercard securecode"> </li> <li class="footer-pay__item"> <img class="footer-pay__image" src="'+e()(m)+'" alt="Belcard"> </li> <li class="footer-pay__item"> <img class="footer-pay__image" src="'+e()(h)+'" alt="Visa"> </li> <li class="footer-pay__item"> <img class="footer-pay__image" src="'+e()(g)+'" alt="Mastercard"> </li> <li class="footer-pay__item"> <img class="footer-pay__image" src="'+e()(_)+'" alt="Belcard"> </li> </ul> </div> <div class="footer-socials"> <h3 class="footer__header">Следи за нами</h3> <ul class="footer-socials__list"> <li class="footer-socials__item"> <img class="footer-socials__image" src="'+e()(f)+'" alt="Instagram"> </li> <li class="footer-socials__item"> <img class="footer-socials__image" src="'+e()(b)+'" alt="Facebook"> </li> <li class="footer-socials__item"> <img class="footer-socials__image" src="'+e()(v)+'" alt="Youtube"> </li> <li class="footer-socials__item"> <img class="footer-socials__image" src="'+e()(C)+'" alt="Vkontakte"> </li> <li class="footer-socials__item"> <img class="footer-socials__image" src="'+e()(P)+'" alt="Odnoklassniki"> </li> </ul> </div> </div> </div> </div> <div class="rsschool"> <a class="rsschool__link" href="https://github.com/novidin" title="@novidin"> <span class="icon icon--github"></span> </a> <a class="rsschool__link" href="https://rs.school/js/" title="RS School JS Course (Frontend/JavaScript)"> <span class="icon icon--rsschool"></span> </a> <a class="rsschool__link" href="https://github.com/ablbsk" title="@ablbsk"> <span class="icon icon--github"></span> </a> </div> ',y=new class{getHTML(){const t=document.createElement("footer");return t.className="footer",t.innerHTML=M,t}},L=t=>{const e=[u.getHTML(),t,y.getHTML()];document.body.append(...e)},w=t=>{const e=parseFloat(t);switch(!0){case e>=4.8:return"rating--good";case e>3.9:return"rating--medium";default:return"rating--bad"}},x={"all-year":"Всесезонные",winter:"Зимние",summer:"Летние"},T='<span class="icon icon--copy"></span>',S=a.p+"assets/icons/card-view.svg",E=a.p+"assets/icons/list-view.svg";class I{constructor(t,e,a){this.keySearch=t,this.title=e,this.select=I.createSelect(),this.updateCallback=a}static createSelect(){const t=document.createElement("select");return t.className="select__select",t}getHTML(){return this.update(),this.select}update(){const t=l.getValuesByKey(this.keySearch,!0);this.select.innerHTML="";const e=document.createElement("option");e.hidden=!0,e.textContent=this.title,this.select.appendChild(e);const a=document.createElement("option");a.textContent="Все",a.value="",a.className="select__option",this.select.appendChild(a);for(const e in t){const a=document.createElement("option");a.textContent=`${e}(${t[e].curr}/${t[e].total})`,a.value=e,a.className="select__option",this.select.appendChild(a)}let s="";const n=W.getReqParamsAll();if(this.keySearch in n){const t=W.getReqParamsAll();t&&(s=t[this.keySearch][0]),this.select.value=s}this.select.onchange=()=>this.route(this.select.value)}route(t){W.setReqParams(this.keySearch,t),this.updateCallback(this)}}const V=I;class N{constructor(t){this.seasonsValues=l.getValuesByKey("season"),this.seasonListDOM=N.createList(),this.updateCallback=t}static createList(){const t=document.createElement("ul");return t.className="season__list",t}getHTML(){return this.update(),this.seasonListDOM}update(){this.seasonsValues=l.getValuesByKey("season"),this.seasonListDOM.innerHTML="";for(const t in this.seasonsValues){const e=document.createElement("li");e.className="season__item",e.innerHTML=`\n        <span class="season__title">${x[t]}</span>\n        <div class="season__control">\n          <input id="${t}" class="season__check" type="checkbox" value="${t}">\n          <label class="season__label" for="${t}">\n            <span class="icon icon--${t}"></span>\n          </label>\n        </div>\n      `,this.seasonListDOM.appendChild(e),this.updateInput(t)}}updateInput(t){this.seasonListDOM.querySelectorAll(".season__check").forEach((e=>{e.id===t&&(e.addEventListener("change",(()=>this.route())),N.isChecked(t)&&(e.checked=!0))}))}getChecked(){return[...this.seasonListDOM.querySelectorAll("input:checked")].map((t=>t.value))}static isChecked(t){const e=W.getReqParamsAll().season;return!!e&&e.includes(t)}route(){W.setReqParams("season",this.getChecked().join(",")),this.updateCallback(this)}}const $=N,k=class{constructor(t,e,a){this.wrapper=document.createElement("div"),this.wrapper.className="multi-range filters__cell filters__cell--v2",this.key=t,this.minRangeVal="0",this.maxRangeVal="0",this.minCurrVal="0",this.maxCurrVal="0",this.title=e,this.rangeMax=document.createElement("input"),this.rangeMin=document.createElement("input"),this.updateCallback=a,this.update()}buildElements(){if(this.wrapper.innerHTML="",this.title){const t=document.createElement("span");t.className="multi-range__header",t.textContent=this.title,this.wrapper.appendChild(t)}const t=document.createElement("div");t.className="multi-range__fields",this.wrapper.appendChild(t);const e=document.createElement("input");e.className="multi-range__value input-min",e.type="number",e.placeholder="Мин",e.min=this.minRangeVal,e.max=this.maxRangeVal,e.oninput=()=>{+e.value<+this.maxCurrVal&&+e.value>+this.minRangeVal&&(this.minCurrVal=e.value,this.setValues({rangeMin:i}),this.route())},e.onblur=()=>{+e.value>+this.maxCurrVal&&(e.value=this.maxCurrVal,this.minCurrVal=e.value,this.setValues({rangeMin:i})),+e.value<+this.minRangeVal&&(e.value=this.minCurrVal,this.minCurrVal=e.value,this.setValues({rangeMin:i})),this.route()},t.appendChild(e);const a=document.createElement("span");a.className="multi-range__separator",a.textContent="-",t.appendChild(a);const s=document.createElement("input");s.className="multi-range__value input-max",s.type="number",s.placeholder="Макс",s.min=this.minRangeVal,s.max=this.maxRangeVal,s.oninput=()=>{+s.value>+this.minCurrVal&&+s.value<+this.maxRangeVal&&(this.maxCurrVal=s.value,this.setValues({rangeMax:o}),this.route())},e.onblur=()=>{+s.value<+this.minCurrVal&&(s.value=this.minCurrVal,this.maxCurrVal=s.value,this.setValues({rangeMax:o})),+s.value>+this.maxRangeVal&&(s.value=this.maxCurrVal,this.maxCurrVal=s.value,this.setValues({rangeMax:o})),this.route()},t.appendChild(s);const n=document.createElement("div");n.className="multi-range__ranges",this.wrapper.appendChild(n);const i=document.createElement("input");this.rangeMin=i,i.className="multi-range__range range-min",i.type="range",i.value=this.minCurrVal,i.min=this.minRangeVal,i.max=this.maxRangeVal,i.step="1",i.style.zIndex="1",i.oninput=()=>{+i.value>+this.maxCurrVal&&(i.value=this.maxCurrVal),this.minCurrVal=i.value,this.setValues({inputMin:e}),this.route()},n.appendChild(i);const o=document.createElement("input");this.rangeMax=o,o.className="multi-range__range range-max",o.type="range",o.step="1",o.min=this.minRangeVal,o.max=this.maxRangeVal,o.value=this.maxCurrVal,o.style.zIndex="0",o.oninput=()=>{+o.value<+this.minCurrVal&&(o.value=this.minCurrVal),this.maxCurrVal=o.value,this.setValues({inputMax:s}),this.route()},n.appendChild(o),this.setValues({inputMin:e,inputMax:s,rangeMin:i,rangeMax:o})}setValues({inputMin:t,inputMax:e,rangeMin:a,rangeMax:s}){t&&(t.value=this.minCurrVal),e&&(e.value=this.maxCurrVal),a&&(a.value=this.minCurrVal),s&&(s.value=this.maxCurrVal),this.fillRange()}fillRange(){const t="#ddd",e="#ff0020",a=+this.maxRangeVal-+this.minRangeVal;this.rangeMax.style.background=`linear-gradient(\n      to right,\n      ${t} 0%,\n      ${t} ${(+this.minCurrVal-+this.minRangeVal)/a*100}%,\n      ${e} ${(+this.minCurrVal-+this.minRangeVal)/a*100}%,\n      ${e} ${(+this.maxCurrVal-+this.minRangeVal)/a*100}%,\n      ${t} ${(+this.maxCurrVal-+this.minRangeVal)/a*100}%,\n      ${t} 100%)`}getHTML(){return this.wrapper}setDataValues(){const t=l.getValuesByKey(this.key,!0);this.minRangeVal=Math.min(...Object.keys(t).map((t=>+t))).toString(),this.maxRangeVal=Math.max(...Object.keys(t).map((t=>+t))).toString(),this.minCurrVal=Math.min(...Object.keys(t).filter((e=>t[e].curr>0)).map((t=>+t))).toString(),this.maxCurrVal=Math.max(...Object.keys(t).filter((e=>t[e].curr>0)).map((t=>+t))).toString()}update(){this.setDataValues(),this.buildElements()}route(){W.setReqParams(this.key,`${this.minCurrVal},${this.maxCurrVal}`),this.updateCallback(this)}};class H{constructor(t){this.wrapper=H.createSearch(),this.updateCallback=t,this.inputValue=""}static createSearch(){const t=document.createElement("div");return t.className="search__container",t}getHTML(){this.wrapper.innerHTML="";const t=document.createElement("input");t.className="search__input",t.type="search",t.placeholder="Поиск",t.autocomplete="off",t.value=H.getSearchValue(),this.wrapper.appendChild(t);const e=document.createElement("div");e.className="search__buttons",this.wrapper.appendChild(e);const a=document.createElement("button");a.className="button search__button-search",a.textContent="Найти",a.onclick=()=>{this.inputValue=t.value.trim(),this.route()},e.appendChild(a);const s=new class{constructor(){this.button=this.createButton()}createButton(){const t=document.createElement("button");return t.className="button search__button-copy",t.title="Copy URL",t.innerHTML=T,t.disabled=!1,t.addEventListener("click",(()=>this.clickHandler())),t}clickHandler(){const t=location.toString();navigator.clipboard.writeText(t).then((()=>{this.pauseButton('<span class="icon icon--copy-access"></span>')})).catch((t=>{this.pauseButton("Fail!"),alert(t)}))}pauseButton(t){this.button.innerHTML=t,this.button.disabled=!0,this.button.classList.add("button--disable"),setTimeout((()=>{this.button.classList.remove("button--disable"),this.enableButton()}),2e3)}enableButton(){this.button.innerHTML=T,this.button.disabled=!1}getHTML(){return this.button}};return e.appendChild(s.getHTML()),this.wrapper}static getSearchValue(){const t=W.getReqParamsAll().search;return t?t[0]:""}route(){this.inputValue.trim()&&(W.setReqParams("search",this.inputValue),this.updateCallback(this))}}const R=H,O=class{constructor(t){this.promo=t,this.itemDOM=this.create()}create(){const t=document.createElement("li");return t.classList.add("promo__activated-item"),t.innerHTML=`\n      <span class="promo__activated-code">${this.promo.name}</span>\n      <span class="promo__activated-code">${this.promo.percent}%</span>\n      <span class="promo__activated-delete">X</span>\n    `,t}start(){this.render(),this.addListeners()}render(){document.querySelector(".promo__activated-list").append(this.itemDOM)}addListeners(){const t=this.itemDOM.querySelector(".promo__activated-delete");t.addEventListener("click",(()=>this.delete(t)))}delete(t){const e=document.querySelector(".promo__activated-list");!function(t){const e=localStorage.getItem("activatedCodes");if(e){const a=JSON.parse(e).filter((e=>e!==t));localStorage.setItem("activatedCodes",JSON.stringify(a))}}(this.promo.name),function(){const e=new Event("deletePromoCode",{bubbles:!0});t.dispatchEvent(e)}(),e.removeChild(this.itemDOM)}},j=a.p+"assets/icons/order/card.svg",B=a.p+"assets/icons/order/visa.svg",D=a.p+"assets/icons/order/mastercard.svg",q=a.p+"assets/icons/order/belcard.svg";class z{constructor(){this.main=z.createMain(),this.cartWrapper=z.createWrapper(),this.paginationSection=z.createPagination(),this.totalWrapper=z.totalWrapper(),this.paginationControls=new class{constructor(){this.pageCount=d.getPagesCount().toString(),this.paginationControlsWrapper=document.createElement("div"),this.paginationControlsWrapper.className="pagination";const t=document.createElement("div");t.className="pagination__column",this.paginationControlsWrapper.appendChild(t);const e=document.createElement("span");e.className="pagination__title",e.textContent="Лимит",t.appendChild(e),this.paginationLimitInput=document.createElement("input"),this.paginationLimitInput.className="pagination__input",this.paginationLimitInput.type="number",this.paginationLimitInput.value="3",this.paginationLimitInput.min="1",this.paginationLimitInput.onchange=()=>{d.setLimitProducts(+this.paginationLimitInput.value),this.goToLastPage(),this.setButtonsState(),this.route("limit",this.paginationLimitInput.value)},t.appendChild(this.paginationLimitInput);const a=document.createElement("div");a.className="pagination__column pagination__column--end",this.paginationControlsWrapper.appendChild(a);const s=document.createElement("span");s.className="pagination__title",s.textContent="Страница",a.appendChild(s);const n=document.createElement("div");n.className="pagination__container",a.appendChild(n),this.paginationPrevBtn=document.createElement("button"),this.paginationPrevBtn.className="pagination__button button button--accent",this.paginationPrevBtn.textContent="<",this.paginationPrevBtn.onclick=()=>this.decrPageNum(),n.appendChild(this.paginationPrevBtn),this.paginationPageNumInput=document.createElement("input"),this.paginationPageNumInput.className="pagination__page",this.paginationPageNumInput.value="1",this.paginationPageNumInput.disabled=!0,n.appendChild(this.paginationPageNumInput),this.paginationNextBtn=document.createElement("button"),this.paginationNextBtn.className="pagination__button button button--accent",this.paginationNextBtn.textContent=">",this.paginationNextBtn.onclick=()=>this.incrPageNum(),n.appendChild(this.paginationNextBtn)}getHTML(){return this.pageCount=d.getPagesCount().toString(),this.setButtonsState(),this.paginationControlsWrapper}goToLastPage(){this.pageCount=d.getPagesCount().toString();let t=+this.paginationPageNumInput.value;t>+this.pageCount&&(t=+this.pageCount,this.setPageNum(t))}goToFirstPage(){this.setPageNum(1)}setValuesFromReqParams(t){this.setLimitValue(t.toString())}setLimitValue(t){this.paginationLimitInput.value=t,d.setLimitProducts(+this.paginationLimitInput.value),this.setButtonsState()}setButtonsState(){this.pageCount=d.getPagesCount().toString(),this.paginationPrevBtn.disabled="1"===this.paginationPageNumInput.value,this.paginationNextBtn.disabled=this.paginationPageNumInput.value===this.pageCount}setPageNum(t){this.setButtonsState(),this.setPageValue(t)}decrPageNum(){let t=+this.paginationPageNumInput.value;t>1&&(t-=1,1===t&&(this.paginationPrevBtn.disabled=!0)),t<+this.pageCount&&(this.paginationNextBtn.disabled=!1),this.setPageValue(t)}incrPageNum(){let t=+this.paginationPageNumInput.value;t<+this.pageCount&&(t+=1,t===+this.pageCount&&(this.paginationNextBtn.disabled=!0)),t>1&&(this.paginationPrevBtn.disabled=!1),this.setPageValue(t)}setPageValue(t){this.paginationPageNumInput.value=t.toString(),this.route("page",this.paginationPageNumInput.value)}route(t,e){W.setReqParams(t,e)}},this.sectionCartProducts=new class{constructor(t){this.section=document.createElement("section"),this.pageNum=1,this.delCallback=t,this.cartProductsWrapper=document.createElement("div"),this.cartProductsWrapper.className="cart__catalog"}buildHTML(){const t=new Event("addedToCard",{bubbles:!0}),e=d.getPaginatedItems(this.pageNum);this.pageNum>d.getPagesCount()?this.delCallback():e.forEach((e=>{const a=document.createElement("article");a.className="product product--cart-view";const s=l.getProductById(e.id);a.innerHTML=`\n        <div class="product__column product__column--main">\n          <div class="product__title">\n            <h3 class="product__brand">${s.brand}</h3>\n            <span class="product__model">${s.model}</span>\n            <span class="product__sizes">${s.size}</span>\n          </div>\n          <img class="product__image"\n               src="${s.imageUrl[0]}"\n               alt="${s.brand} ${s.model}">\n        </div>\n      `;const n=document.createElement("div"),i=w(s.rating.overageRating);n.innerHTML=`\n      <ul class="product__labels-list">\n        <li class="product__labels-item">\n          <span class="product__season icon icon--${s.season}"></span>\n          <span class="product__labels-title">${x[s.season]}</span>\n        </li>\n        <li class="product__labels-item">\n          <p class="product__rating">\n              <span class="icon icon--star rating ${i}"></span>\n              <span class="rating__value ${i}">${s.rating.overageRating}</span>\n          </p>\n          <span class="product__labels-title">Рейтинг</span>\n        </li>\n        <li class="product__labels-item">\n          <span class="product__comments">${s.rating.commentsCount}</span>\n          <span class="product__labels-title">Комент</span>\n        </li>\n      </ul>\n      <ul class="product__features-list">\n        <li class="product__features-item">\n          <span class="product__features-title">Глубина протектора</span>\n          <span class="product__features-value">${s.features.protector} мм</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Вес</span>\n          <span class="product__features-value">${s.features.weight} кг</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Эксплуатация</span>\n          <span class="product__features-value">${s.features.exploitation}</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Защита диска</span>\n          <span class="product__features-value">${s.features.discProtector}</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Индекс нагрузки</span>\n          <span class="product__features-value">${s.features.loadIndex}</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Индекс скорости</span>\n          <span class="product__features-value">${s.features.speedIndex}</span>\n        </li>\n      </ul>\n      `,n.className="product__column product__column--short product__column--hidden",a.appendChild(n);const o=document.createElement("div");o.className="product__column product__column--price",a.appendChild(o);const r=document.createElement("div");r.className="product__delete-container",o.appendChild(r);const c=document.createElement("span");c.className="product__delete",c.textContent=`${e.num}`,r.appendChild(c);const u=document.createElement("span");u.classList.add("product__count"),u.textContent=`В наличии: ${s.count} шт.`,o.appendChild(u);const p=document.createElement("ul");p.className="product__summary-list",o.appendChild(p);const m=document.createElement("li");m.className="product__summary-item",m.innerHTML=`\n        <span class="product__summary-title">Цена за шт.</span>\n        <span class="product__summary-value">${s.price} руб</span>\n      `,p.appendChild(m);const h=document.createElement("li");h.className="product__summary-item",h.innerHTML='<span class="product__summary-title">Количество</span>',p.appendChild(h);const g=document.createElement("div");g.className="product__summary-count",h.appendChild(g);const _=document.createElement("button");_.className="button button--accent product__summary-button",_.textContent="-",_.onclick=()=>{d.decrProduct(e.id);const a=+f.value-1;f.value=a.toString(),C.textContent=+f.value*+s.price+" руб",_.dispatchEvent(t),0===a&&this.update()},g.appendChild(_);const f=document.createElement("input");f.className="product__summary-value product__summary-input",f.type="number",f.disabled=!0,f.value=e.count.toString(),g.appendChild(f);const b=document.createElement("button");b.className="button button--accent product__summary-button",b.textContent="+",b.onclick=()=>{if(+f.value>=+s.count)return;d.addProduct(e.id);const a=+f.value+1;f.value=a.toString(),C.textContent=+f.value*+s.price+" руб",b.dispatchEvent(t)},g.appendChild(b);const v=document.createElement("li");v.className="product__summary-item",v.innerHTML='<span class="product__summary-title">Стоимость</span>',p.appendChild(v);const C=document.createElement("span");C.className="product__summary-value product__summary-value--accent",C.textContent=+f.value*+s.price+" руб",v.appendChild(C);const P=document.createElement("button");P.className="button button--accent product__details-button",P.innerHTML='Детали <span class="icon icon--arrow-down"></span></button>',P.onclick=()=>{const t=P.querySelector(".icon--arrow-down");n.classList.toggle("product__column--hidden"),t.classList.toggle("icon--rotate")},o.appendChild(P),this.cartProductsWrapper.appendChild(a)}))}getHTML(t){return this.pageNum=t||1,this.update(),this.cartProductsWrapper}update(){this.cartProductsWrapper.innerHTML="",this.buildHTML()}}(this.goFirstPage.bind(this)),this.sectionCartTotal=new class{constructor(){this.promoContentDOM=this.createContainer(),this.promoPercent=0,this.promoCodes=[{name:"DARIM10",percent:10},{name:"DARIM20",percent:20}],this.activatedCodes=this.getActivatedCodesFromStorage(),window.addEventListener("addedToCard",(()=>this.updateTotalColumn())),window.addEventListener("deletePromoCode",(()=>this.updateState()))}createContainer(){const t=document.createElement("div");return t.classList.add("promo__content"),t}getHTML(){this.promoContentDOM.innerHTML="";const t=[this.createTotalColumnDOM(),this.createActivateColumnDOM(),this.createConfirmColumnDOM()];return this.promoContentDOM.append(...t),this.promoContentDOM}createTotalColumnDOM(){const t=this.createColumnDOM(),e=d.getCountProducts().toString(),a=d.getTotal().toString(),s=+(+a*(this.promoPercent/100)).toFixed(2);return t.innerHTML=`\n      <ul class="promo__list">\n        <li class="promo__item">\n          <span class="promo__item-title">Количество</span>\n          <span class="promo__item-value">${e} шт.</span>\n        </li>\n        <li class="promo__item">\n          <span class="promo__item-title">Стоимость</span>\n          <span class="promo__item-value">${a} руб</span>\n        </li>\n        <li class="promo__item">\n           <span class="promo__item-title">Скидка</span>\n           <span class="promo__item-value">- ${s} руб</span>\n        </li>\n        <li class="promo__item promo__item--main">\n           <span class="promo__item-title">Итого</span>\n           <span class="promo__item-value">${+a-s} руб</span>\n        </li>\n      </ul>\n    `,t}createActivateColumnDOM(){const t=this.createColumnDOM();return t.innerHTML='\n      <ul class="promo__activated-list"></ul>\n      <div class="promo__activate">\n        <input class="promo__input" type="text" placeholder="Промокод (DARIM10, DARIM20)" autocomplete="off">\n        <button class="button button--special">Применить</button>\n      </div>\n    ',t}createConfirmColumnDOM(){const t=this.createColumnDOM();return t.innerHTML='<button id="orderingButton" class="button promo__button">Оформить заказ</button>',t}createColumnDOM(){const t=document.createElement("div");return t.classList.add("promo__column"),t}updateTotalColumn(){this.promoContentDOM.removeChild(this.promoContentDOM.children[0]),this.promoContentDOM.prepend(this.createTotalColumnDOM())}updateState(){this.activatedCodes=this.getActivatedCodesFromStorage(),this.promoPercent=0,this.findActivatedCodes(),this.updateTotalColumn()}addPromoCode(){const t=document.querySelector(".promo__input");this.promoCodes.forEach((e=>{t.value!==e.name||this.activatedCodes.includes(t.value)||(new O(e).start(),this.promoPercent=this.promoPercent+e.percent,this.activatedCodes.push(e.name),this.updateTotalColumn(),this.setActivatedCodesInStorage(),t.value="")}))}renderActivatedPromoCodes(){this.activatedCodes.length&&(this.activatedCodes.forEach((t=>{this.promoCodes.find((e=>{e.name===t&&new O(e).start()}))})),this.findActivatedCodes(),this.updateTotalColumn())}findActivatedCodes(){this.activatedCodes.forEach((t=>{this.promoCodes.find((e=>{e.name===t&&(this.promoPercent=this.promoPercent+e.percent)}))}))}setActivatedCodesInStorage(){localStorage.setItem("activatedCodes",JSON.stringify(this.activatedCodes))}getActivatedCodesFromStorage(){const t=localStorage.getItem("activatedCodes");return t?JSON.parse(t):[]}}}static createMain(){const t=document.createElement("main");return t.className="main",t}static createPagination(){const t=document.createElement("section");return t.className="cart__section",t}static createWrapper(){const t=document.createElement("div");return t.className="cart",t}static totalWrapper(){const t=document.createElement("div");return t.className="promo",t.innerHTML='<h3 class="promo__header">Заказ</h3>',t}render(t){document.title="Online Store — Корзина",this.buildMainHTML(t),this.main.appendChild(this.cartWrapper),document.body.innerHTML="",L(this.main),this.sectionCartTotal.renderActivatedPromoCodes()}buildMainHTML(t){d.getCartProducts().length?(this.cartWrapper.innerHTML="",this.cartWrapper.appendChild(this.paginationSection),this.checkBuyNow(t),this.buildPagination(),this.setPaginationValues(t),this.buildTotal(),this.update(t),this.startListeners()):this.cartWrapper.innerHTML='<p class="cart__empty">Ваша корзина пуста</p>'}showOrderingModal(){(new class{constructor(){this.mainDOM=document.querySelector("main"),this.modalDOM=this.createModal(),this.shadowDOM=this.createShadow()}createModal(){const t=document.createElement("div");return t.classList.add("ordering"),t}createShadow(){const t=document.createElement("div");return t.classList.add("shadow","shadow--active"),t}start(){this.render(),this.openModal(),this.validate()}render(){this.modalDOM.append(function(){const t=document.createElement("div");return t.classList.add("ordering__container"),t.innerHTML='<h2 class="ordering__header">Оформление заказа</h2>',t.append(function(){const t=document.createElement("form");return t.classList.add("ordering__form"),t.innerHTML=`\n        <div class="ordering__form-column">\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingName">Имя и Фамилия</label>\n            <input class="ordering__form-input" type="text" name="orderingName" id="orderingName" autocomplete="off" required>\n            <span class="ordering__form-error">* Неверное значение</span>\n          </div>\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingPhone">Номер телефона</label>\n            <input class="ordering__form-input" type="text" name="orderingPhone" id="orderingPhone" autocomplete="off" required>\n            <span class="ordering__form-error">* Неверное значение</span>\n          </div>\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingAddress">Адрес доставки</label>\n            <input class="ordering__form-input" type="text" name="orderingAddress" id="orderingAddress" autocomplete="off" required>\n            <span class="ordering__form-error">* Неверное значение</span>\n          </div>\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingEmail">Почта</label>\n            <input class="ordering__form-input" type="text" name="orderingEmail" id="orderingEmail" autocomplete="off" required>\n            <span class="ordering__form-error">* Неверное значение</span>\n          </div>\n        </div>\n        <div class="ordering__form-column">\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingCardNumber">Номер карты</label>\n            <div class="ordering__form-card-number">\n              <input class="ordering__form-input" type="text" name="orderingCardNumber" id="orderingCardNumber"\n                     autocomplete="off" placeholder="начни с 4, 5 или 9" required>\n              <span class="ordering__form-error">* Неверное значение</span>\n              <div class="ordering__form-image">\n                <img src=${j} alt="Неопределено">\n              </div>\n            </div>\n          </div>\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingExpirationDate">Срок действия</label>\n            <input class="ordering__form-input" type="text" name="orderingExpirationDate" id="orderingExpirationDate"\n                   autocomplete="off" required>\n            <span class="ordering__form-error">* Неверное значение</span>\n          </div>\n          <div class="ordering__form-line">\n            <label class="ordering__form-label" for="orderingCVV">CVV</label>\n            <input class="ordering__form-input" type="text" name="orderingCVV" id="orderingCVV" autocomplete="off" required>\n            <span class="ordering__form-error">* Неверное значение</span>\n          </div>\n          <div class="ordering__form-line">\n            <label class="ordering__form-label ordering__form-label--hidden">Подтвердить</label>\n            <button class="button ordering__button">Заказать</button>\n          </div>\n        </div>\n      `,t}()),t}())}openModal(){this.mainDOM.append(this.modalDOM,this.shadowDOM),this.shadowDOM.addEventListener("click",(()=>this.closeModal()))}closeModal(){this.modalDOM.remove(),this.shadowDOM.remove()}validate(){const t=document.querySelector(".ordering__form"),e=document.querySelector(".ordering__button"),a={orderingName:!1,orderingPhone:!1,orderingAddress:!1,orderingEmail:!1,orderingCardNumber:!1,orderingExpirationDate:!1,orderingCVV:!1};t.addEventListener("input",(t=>{const e=t.target,s=e.nextElementSibling,n=function(t,e){const s=new RegExp({orderingName:/[a-zA-Zа-яА-Я]{3,}(\s[a-zA-Zа-яА-Я]{3,})+$/,orderingPhone:/[+][0-9]{9,}$/,orderingAddress:/[a-zA-Zа-яА-Я]{5,}(\s[a-zA-Zа-яА-Я]{5,})+$/,orderingEmail:/^([a-z0-9]{3,12})+@([a-z]+\.)+[a-z]{2,4}$/,orderingCardNumber:/^[0-9]{16}$/,orderingExpirationDate:/^(0[1-9]|1[0-2])\/([0-9]{2}|[0-9]{2})$/,orderingCVV:/^[0-9]{3}$/}[e]).test(t);return""!==e&&(a[e]=s),s}(e.value,e.id);"orderingExpirationDate"===e.id&&function(){const a=t.inputType,s=t.target;t.target&&(2===e.value.length?s.value="deleteContentBackward"===a?e.value.split("/")[0]:e.value+"/":e.value.length>4&&(s.value=e.value.slice(0,5)))}(),"orderingCardNumber"===e.id&&function(){const t=document.querySelector(".ordering__form-image");switch(e.value[0]){case"4":t.innerHTML=`<img src=${B} alt="Visa">`;break;case"5":t.innerHTML=`<img src=${D} alt="Mastercard">`;break;case"9":t.innerHTML=`<img src=${q} alt="Белкард">`;break;default:t.innerHTML=`<img src=${j} alt="Неопределено">`}}(),n?s.classList.remove("ordering__form-error--active"):s.classList.add("ordering__form-error--active")})),e.addEventListener("click",(t=>{t.preventDefault();const e=Object.values(a);e.every((t=>t))?(console.log("validate successful"),this.showSuccessMessage()):e.every((t=>!t))?document.querySelectorAll(".ordering__form-error").forEach((t=>t.classList.add("ordering__form-error--active"))):console.log("validate error")}))}showSuccessMessage(){const t=this.modalDOM.querySelector(".ordering__container");t&&(t.innerHTML='\n        <h2 class="ordering__header">Спасибо за заказ!</h2>\n      ',setTimeout((()=>{d.clearProducts(),function(){localStorage.setItem("activatedCodes",JSON.stringify([]));const t=new Event("deletePromoCode",{bubbles:!0});document.dispatchEvent(t)}(),this.closeModal(),W.goTo("/catalog")}),3e3))}}).start()}checkBuyNow(t){t.buy&&(W.resetReqParams(),this.showOrderingModal())}buildTotal(){this.cartWrapper.appendChild(this.totalWrapper),this.totalWrapper.appendChild(this.sectionCartTotal.getHTML())}buildPagination(){this.paginationSection.appendChild(this.paginationControls.getHTML())}goFirstPage(){this.paginationControls.goToFirstPage()}setPaginationValues(t){const e=t.limit&&t.limit[0]?+t.limit[0]:3;this.paginationControls.setValuesFromReqParams(e)}buildProductsHTML(t=1){var e;d.getCartProducts().length?(null===(e=this.sectionCartProductsHTML)||void 0===e||e.remove(),this.sectionCartProductsHTML=this.sectionCartProducts.getHTML(t),this.paginationSection.appendChild(this.sectionCartProductsHTML)):this.cartWrapper.innerHTML='<p class="cart__empty">Ваша корзина пуста</p>'}startListeners(){const t=this.cartWrapper.querySelector(".promo__button");this.cartWrapper.querySelector(".button--special").addEventListener("click",(()=>this.sectionCartTotal.addPromoCode())),t.addEventListener("click",(()=>this.showOrderingModal()))}update(t){let e=1;t.page&&t.page[0]&&(e=+t.page[0]),this.buildProductsHTML(e)}}const U=z,A=[{path:"/",title:"Home",isMenuItem:!0,page:new class{render(t){t.length&&W.goTo("/"),document.title="Online Store — Главная";const e=document.createElement("main");e.innerHTML=n,L(e)}update(t){this.render(t)}}},{path:"/catalog",title:"Catalog",isMenuItem:!0,page:new class{constructor(){this.sectionProducts=new class{constructor(){this.section=document.createElement("section")}buildHTML(){const t=l.getCurrProducts();this.section.innerHTML="",this.section.className="catalog";const e=document.createElement("div");e.className="catalog__info",this.section.appendChild(e),e.appendChild(this.getSwitchCardViewButtonHTML());const a=new class{getHTML(){const t=W.getReqParamsAll();document.createElement("div").className="catalog__select select";const e=document.createElement("select");e.className="select__select",e.innerHTML='\n      <option hidden>Сортировка</option>\n      <option value="price-ASC" class="select__option">Цена ▲</option>\n      <option value="price-DESC" class="select__option">Цена ▼</option>\n      <option value="count-ASC" class="select__option">Количество ▲</option>\n      <option value="count-DESC" class="select__option">Количество ▼</option>\n      <option value="productRating-ASC" class="select__option">Рейтинг ▲</option>\n      <option value="productRating-DESC" class="select__option">Рейтинг ▼</option>\n    ';const a=t.sort;return a&&(e.value=a[0]),e.addEventListener("change",(()=>this.route(e.value))),e}route(t){W.setReqParams("sort",t)}};e.appendChild(a.getHTML());const s=document.createElement("p");s.className="catalog__title",s.innerHTML=`Найдено: <span class="catalog__count">${t.length}</span>`,this.section.appendChild(s);const n=document.createElement("div");n.className="catalog__container",this.section.appendChild(n),t.length||(n.innerHTML='<p class="catalog__title catalog__count">Товары не найдены</p>');const i=this.isViewModeTile()?"tile":"list";t.forEach((t=>{const e=this.getProductCardHTML(t,i);n.appendChild(e)}))}getHTML(){return this.buildHTML(),this.section}getSwitchCardViewButtonHTML(){const t=document.createElement("button"),e=this.isViewModeTile()?E:S;return t.className="catalog__button",t.innerHTML=`<img class="catalog__image" src="${e}" alt="Change view style">`,t.addEventListener("click",(()=>{W.setReqParams("tile",(!this.isViewModeTile()).toString())})),t}isViewModeTile(){const[t]=W.getReqParamsAll().tile||["false"];return JSON.parse(t)}getProductCardHTML(t,e){const a=document.createElement("article");a.className=`product product--${e}-view`,a.innerHTML=this.getProductCardTemplate(t);const s=a.querySelector(".button");return d.isProductInCart(t.id)&&(s.textContent="В корзине",s.classList.add("button--in-cart")),s.addEventListener("click",(()=>{d.isProductInCart(t.id)?d.removeProduct(t.id):d.addProduct(t.id);const e=new Event("addedToCard",{bubbles:!0});s.dispatchEvent(e),this.buildHTML()})),a}getProductCardTemplate(t){return`\n      <div class="product__column product__column--main">\n        <h3 class="product__header">\n          <a id="productTitle" class="product__title" href="/product?id=${t.id}" data-local-link>\n            <span class="product__brand">${t.brand}</span>\n            <span class="product__model">${t.model}</span>\n            <span class="product__sizes">${t.size}</span>\n          </a>\n        </h3>\n        <ul class="product__miniatures-list">\n          <li class="product__miniatures-item product__miniatures-item--active">\n            <img class="product__miniatures-image"\n                 src="${t.imageUrl[0]}" alt="${t.brand} ${t.model}">\n          </li>\n          <li class="product__miniatures-item">\n            <img class="product__miniatures-image"\n                 src="${t.imageUrl[1]}" alt="${t.brand} ${t.model}">\n          </li>\n        </ul>\n        <img class="product__image"\n          src="${t.imageUrl[0]}"\n          alt="${t.brand} ${t.model}">\n      </div>\n      <div class="product__column product__column--short">\n        <div class="product__subtitle product__subtitle--top">\n          <span class="product__price">${t.price} руб</span>\n          <span class="product__count">В наличии: ${t.count} шт.</span>\n        </div>\n        <ul class="product__labels-list">\n          <li class="product__labels-item">\n            <span class="product__season icon icon--${t.season}"></span>\n            <span class="product__labels-title">${x[t.season]}</span>\n          </li>\n          <li class="product__labels-item">\n            <p class="product__rating">\n              <span class="icon icon--star rating ${w(t.rating.overageRating)}"></span>\n              <span class="rating__value ${w(t.rating.overageRating)}">${t.rating.overageRating}</span>\n            </p>\n            <span class="product__labels-title">Рейтинг</span>\n          </li>\n          <li class="product__labels-item">\n            <span class="product__comments">${t.rating.commentsCount}</span>\n            <span class="product__labels-title">Комент</span>\n          </li>\n        </ul>\n        <ul class="product__features-list">\n          <li class="product__features-item">\n            <span class="product__features-title">Глубина протектора</span>\n            <span class="product__features-value">${t.features.protector} мм</span>\n          </li>\n          <li class="product__features-item">\n            <span class="product__features-title">Вес</span>\n            <span class="product__features-value">${t.features.weight} кг</span>\n          </li>\n          <li class="product__features-item">\n            <span class="product__features-title">Эксплуатация</span>\n            <span class="product__features-value">${t.features.exploitation}</span>\n          </li>\n          <li class="product__features-item">\n            <span class="product__features-title">Защита диска</span>\n            <span class="product__features-value">${t.features.discProtector}</span>\n          </li>\n          <li class="product__features-item">\n            <span class="product__features-title">Индекс нагрузки</span>\n            <span class="product__features-value">${t.features.loadIndex}</span>\n          </li>\n          <li class="product__features-item">\n            <span class="product__features-title">Индекс скорости</span>\n            <span class="product__features-value">${t.features.speedIndex}</span>\n          </li>\n        </ul>\n      </div>\n      <div class="product__column product__column--price">\n        <div class="product__subtitle">\n          <p class="product__price">${t.price} руб</p>\n          <p class="product__count">В наличии: ${t.count} шт.</p>\n        </div>\n        <ul class="product__offers-list">\n            <li class="product__offers-item">\n              <span class="product__offers-icon icon icon--pay"></span>\n              <p class="product__offers-title">Оплата частями</p>\n            </li>\n            <li class="product__offers-item">\n              <span class="product__offers-icon icon icon--guarantee"></span>\n              <p class="product__offers-title">Официальная гарантия</p>\n            </li>\n            <li class="product__offers-item">\n              <span class="product__offers-icon icon icon--shipping"></span>\n              <p class="product__offers-title">Доставка по РБ</p>\n            </li>\n        </ul>\n        <button class="product__button button">В корзину</button>\n      </div>\n    `}},this.main=this.createMain(),this.sectionProductsHTML}createMain(){const t=document.createElement("main");return t.className="main",t}render(t){l.setFilters(t),document.title="Online Store — Каталог",this.main&&this.main.remove(),this.main=this.createMain();const e=new class{constructor(){this.filtersWrapper=document.createElement("div"),this.filtersWrapper.className="filters",this.filtersObjects=[];const t=document.createElement("div");this.filtersWrapper.appendChild(this.getFilterSwitcherButtonHTML(t)),t.className="filters__grid",this.filtersWrapper.appendChild(t),this.selectSizes=new V("size","Выберите размер",this.updateFilters.bind(this)),t.appendChild(this.getFilterSizeHTML()),this.selectBrands=new V("brand","Выберите производителя",this.updateFilters.bind(this)),t.appendChild(this.getFilterBrandHTML()),this.filterSeasons=new $(this.updateFilters.bind(this)),t.appendChild(this.getFilterSeasonHTML()),this.multiRangeCount=new k("count","Кол-во",this.updateFilters.bind(this)),this.filtersObjects.push(this.multiRangeCount),t.appendChild(this.multiRangeCount.getHTML()),this.multiRangePrice=new k("price","Цена",this.updateFilters.bind(this)),this.filtersObjects.push(this.multiRangePrice),t.appendChild(this.multiRangePrice.getHTML()),t.appendChild(this.getFiltersResetButtonHTML()),this.filterSearch=new R(this.updateFilters.bind(this)),t.appendChild(this.getSearchHTML())}getHTML(){return this.filtersWrapper}updateFilters(t){this.filtersObjects.forEach((e=>{JSON.stringify(t)!==JSON.stringify(e)&&e.update()}))}getFilterSwitcherButtonHTML(t){const e=document.createElement("button");return e.className="button button--accent filters__button",e.innerHTML='Фильтры <span class="icon icon--arrow-down"></span>',e.addEventListener("click",(a=>{a.preventDefault();const s=e.querySelector(".icon--arrow-down");t.classList.toggle("filters__grid--open"),s.classList.toggle("icon--rotate")})),e}getFilterSizeHTML(){const t=document.createElement("div");return t.className="select filters__cell",t.innerHTML='<span class="select__title">Ширина / Профиль / Диаметр</span>',t.appendChild(this.selectSizes.getHTML()),this.filtersObjects.push(this.selectSizes),t}getFilterBrandHTML(){const t=document.createElement("div");return t.className="select filters__cell",t.innerHTML='<span class="select__title">Производитель</span>',t.appendChild(this.selectBrands.getHTML()),this.filtersObjects.push(this.selectBrands),t}getFilterSeasonHTML(){const t=document.createElement("div");return t.className="season filters__cell filters__cell--v2",t.appendChild(this.filterSeasons.getHTML()),this.filtersObjects.push(this.filterSeasons),t}getFiltersResetButtonHTML(){const t=document.createElement("button");return t.className="filters__cell--button button button--accent",t.textContent="Сброс",t.onclick=()=>{W.resetReqParams()},t}getSearchHTML(){const t=document.createElement("div");t.className="search";const e=document.createElement("span");return e.className="search__header",e.textContent="Поиск",t.appendChild(e),t.appendChild(this.filterSearch.getHTML()),t}};this.main.appendChild(e.getHTML()),this.updateDOM(),L(this.main)}update(t){l.setFilters(t),this.updateDOM()}updateDOM(){var t;null===(t=this.sectionProductsHTML)||void 0===t||t.remove(),this.sectionProductsHTML=this.sectionProducts.getHTML(),this.main.appendChild(this.sectionProductsHTML)}}},{path:"/cart",title:"Cart",isMenuItem:!0,page:new U},{path:"/product",title:"Product",isMenuItem:!1,page:new class{render(t){t.id||W.goTo("/404");const e=l.getProductById(t.id[0]);document.title=`Online Store — ${(null==e?void 0:e.model)||"not found"}`;const a=document.createElement("main");a.className="main",e?(a.appendChild(this.getBreadcrumbsHTML(e)),a.appendChild(this.getProductCardHTML(e))):W.goTo("/404"),L(a)}getBreadcrumbsHTML(t){const e=document.createElement("div");return e.className="link-navigation",e.innerHTML=this.getBreadcrumbsTemplate(t),e}getBreadcrumbsTemplate(t){return`\n      <ul class="link-navigation__list">\n        <li class="link-navigation__item">\n          <a href="/catalog" class="link-navigation__link" data-local-link>Шины</a>\n          <span class="icon icon--link-navigation"></span>\n        </li>\n        <li class="link-navigation__item">\n          <a href="/catalog?season=${t.season}" class="link-navigation__link" data-local-link>${x[t.season]}</a>\n          <span class="icon icon--link-navigation"></span>\n        </li>\n        <li class="link-navigation__item">\n          <a href="/catalog?brand=${t.brand}" class="link-navigation__link" data-local-link>${t.brand}</a>\n          <span class="icon icon--link-navigation"></span>\n        </li>\n        <li class="link-navigation__item">\n          <span class="link-navigation__link link-navigation__link--disable">${t.model}</span>\n        </li>\n      </ul>\n    `}getProductCardHTML(t){const e=document.createElement("div");e.classList.add("catalog");const a=document.createElement("div");a.className="product product--page-view",e.appendChild(a),a.innerHTML=this.getProductCardTemplate(t),this.addImageSwitcher(t,a);const s=a.querySelector("#cartButton");return this.setCartButtonState(t.id,s),s.onclick=()=>{d.isProductInCart(t.id)?d.removeProduct(t.id):d.addProduct(t.id),this.setCartButtonState(t.id,s);const e=new Event("addedToCard",{bubbles:!0});s.dispatchEvent(e)},a.querySelector("#buyButton").onclick=()=>{d.isProductInCart(t.id)||d.addProduct(t.id),W.goTo("/cart?buy=true")},e}setCartButtonState(t,e){d.isProductInCart(t)?(e.textContent="В корзине",e.classList.add("button--in-cart")):(e.textContent="В корзину",e.classList.remove("button--in-cart"))}getProductCardTemplate(t){return`\n    <div class="product__column product__column--main">\n     <h3 class="product__header">\n        <a id="productTitle" class="product__title" href="/product?id=${t.id}" data-local-link>\n          <span class="product__brand">${t.brand}</span>\n          <span class="product__model">${t.model}</span>\n          <span class="product__sizes">${t.size}</span>\n        </a>\n      </h3>\n    <ul class="product__miniatures-list">\n        <li class="product__miniatures-item product__miniatures-item--active">\n          <img class="product__miniatures-image"\n               src="${t.imageUrl[0]}" alt="${t.brand} ${t.model}">\n        </li>\n        <li class="product__miniatures-item">\n          <img class="product__miniatures-image"\n               src="${t.imageUrl[1]}" alt="${t.brand} ${t.model}">\n        </li>\n      </ul>\n    <img class="product__image"\n        src="${t.imageUrl[0]}"\n        alt="${t.brand} ${t.model}">\n  </div>\n    <div class="product__column product__column--short">\n      <div class="product__subtitle product__subtitle--top">\n        <span class="product__price">${t.price} руб</span>\n        <span class="product__count">В наличии: ${t.count} шт.</span>\n      </div>\n      <ul class="product__labels-list">\n        <li class="product__labels-item">\n          <span class="product__season icon icon--${t.season}"></span>\n          <span class="product__labels-title">${x[t.season]}</span>\n        </li>\n        <li class="product__labels-item">\n          <p class="product__rating">\n            <span class="icon icon--star rating ${w(t.rating.overageRating)}"></span>\n            <span class="rating__value ${w(t.rating.overageRating)}">${t.rating.overageRating}</span>\n          </p>\n          <span class="product__labels-title">Рейтинг</span>\n        </li>\n        <li class="product__labels-item">\n          <span class="product__comments">${t.rating.commentsCount}</span>\n          <span class="product__labels-title">Комент</span>\n        </li>\n      </ul>\n      <ul class="product__features-list">\n        <li class="product__features-item">\n          <span class="product__features-title">Глубина протектора</span>\n          <span class="product__features-value">${t.features.protector} мм</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Вес</span>\n          <span class="product__features-value">${t.features.weight} кг</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Эксплуатация</span>\n          <span class="product__features-value">${t.features.exploitation}</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Защита диска</span>\n          <span class="product__features-value">${t.features.discProtector}</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Индекс нагрузки</span>\n          <span class="product__features-value">${t.features.loadIndex}</span>\n        </li>\n        <li class="product__features-item">\n          <span class="product__features-title">Индекс скорости</span>\n          <span class="product__features-value">${t.features.speedIndex}</span>\n        </li>\n      </ul>\n    </div>\n    <div class="product__column product__column--price">\n      <div class="product__subtitle">\n        <p class="product__price">${t.price} руб</p>\n        <p class="product__count">В наличии: ${t.count} шт.</p>\n      </div>\n      <ul class="product__offers-list">\n          <li class="product__offers-item">\n            <span class="product__offers-icon icon icon--pay"></span>\n            <p class="product__offers-title">Оплата частями</p>\n          </li>\n          <li class="product__offers-item">\n            <span class="product__offers-icon icon icon--guarantee"></span>\n            <p class="product__offers-title">Официальная гарантия</p>\n          </li>\n          <li class="product__offers-item">\n            <span class="product__offers-icon icon icon--shipping"></span>\n            <p class="product__offers-title">Доставка по РБ</p>\n          </li>\n        </ul>\n      <button id="buyButton" class="product__buy product__button button button--accent">Купить</button>\n      <button id="cartButton" class="product__button button">В корзину</button>\n    </div>\n  `}addImageSwitcher(t,e){const a=e.querySelectorAll(".product__miniatures-item"),s=e.querySelector(".product__image");a.forEach(((e,a)=>{e.addEventListener("click",(()=>{const n="product__miniatures-item--active";1===e.classList.length&&(document.querySelector(`.${n}`).classList.remove(`${n}`),e.classList.add(`${n}`),s.setAttribute("src",`${t.imageUrl[a]}`))}))}))}update(t){this.render(t)}}},{path:"/404",title:"Error 404",isMenuItem:!1,page:new class{render(t){document.title="Страница не найдена",t.length&&W.goTo("/404");const e=document.createElement("main");e.append(this.createMessage()),L(e)}createMessage(){const t=document.createElement("div");return t.classList.add("not-found"),t.innerHTML='\n      <div class="wrapper">\n        <span class="not-found__image"></span>\n        <p class="not-found__title">Ой! Что-то пошло не так...</p>\n      </div>\n    ',t}update(t){this.render(t)}}}];class F{constructor(){this.routes=A,this.reqParams={}}loadPage(t){const e=location.pathname,a=A.filter((t=>t.path===e)),s=this.getReqParamsAll();if(a.length<1)this.goTo("/404");else{const e=a[0];t&&Object.keys(s).length?e.page.update(s):(document.body.innerHTML="",e.page.render(s))}}static convertReqParamsToObj(t){const e={};return t.forEach(((t,a)=>{t.split(",").filter((t=>t)).length>0&&(e[a]=t.split(","))})),e}goTo(t){const e=location.pathname;history.pushState("","",t),location.pathname!==e?this.loadPage():this.loadPage(!0)}getReqParamsAll(){const t=new URL(location.toString());return F.convertReqParamsToObj(t.searchParams)}setReqParams(t,e){const a=new URLSearchParams(this.reqParams);a.has(t)?a.set(t,e):a.append(t,e),this.reqParams=a;const s=new URL(location.toString());s.search=a.toString(),this.goTo(s.toString())}resetReqParams(){this.reqParams={},this.goTo(location.pathname)}start(){window.addEventListener("popstate",(()=>this.loadPage())),window.addEventListener("DOMContentLoaded",(()=>this.loadPage())),window.addEventListener("click",(t=>{if(!t.target)return;const e=t.composedPath()[0].closest("a");(null==e?void 0:e.matches("[data-local-link"))&&(t.preventDefault(),this.goTo(e.href))}))}}const W=new F;(new class{constructor(){this.router=W}start(){this.getLocalStorage(),window.addEventListener("beforeunload",this.setLocalStorage.bind(this)),this.router.start()}setLocalStorage(){const t=d.getCartProducts();localStorage.setItem("cartItems",JSON.stringify(t))}getLocalStorage(){const t=localStorage.getItem("cartItems");if(t){const e=JSON.parse(t);d.setProducts(e)}}}).start()})()})();
//# sourceMappingURL=main.92b90aac59cbc7309271.js.map